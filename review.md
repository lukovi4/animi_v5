–ü–æ—á—Ç–∏, –Ω–æ **–ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é PR-03** ‚Äî –Ω–∞—à—ë–ª **–æ–¥–∏–Ω —Ä–µ–ª–∏–∑–Ω—ã–π –±–ª–æ–∫–µ—Ä** –≤ `AnimValidator+Shapes.swift`. –û—Å—Ç–∞–ª—å–Ω–æ–µ –≤—ã–≥–ª—è–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–º–æ–¥–µ–ª—å `LottieShapeRect`, `.rect` case, decode `case "rc"`, —Ç–µ—Å—Ç—ã, ‚Äúoverloaded r‚Äù ‚Äî –≤—Å—ë –æ–∫).

## ‚ùå –ë–ª–æ–∫–µ—Ä: –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `path` –¥–ª—è shape items –≤–Ω—É—Ç—Ä–∏ `gr.it`

–°–µ–π—á–∞—Å —Ä–µ–∫—É—Ä—Å–∏—è –≤ `validateShapeItem` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `context` —Ç–∞–∫:

```swift
context: "\(context)[\(layerIndex)].shapes[\(shapeIndex)].it"
```

–ê –ø–æ—Ç–æ–º `basePath` —Å–Ω–æ–≤–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç `[\(layerIndex)]` –∏ `.shapes[...]`.
–í –∏—Ç–æ–≥–µ –ø—É—Ç—å –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö shape items –ø–æ–ª—É—á–∞–µ—Ç—Å—è **—Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–Ω–¥–µ–∫—Å–∞ —Å–ª–æ—è** –∏ –≤–æ–æ–±—â–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä–µ.

–≠—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç –Ω–∞—à –ø—Ä–∏–Ω—Ü–∏–ø PR-02/—Ä–µ–ª–∏–∑–∞: **—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ, —Ç–æ—á–Ω—ã–µ path‚Äô—ã**, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø–æ –Ω–∏–º –º—ã –¥–µ–±–∞–∂–∏–º ‚Äú–ø–æ—á–µ–º—É –≤–∞–ª–∏–¥–∞—Ç–æ—Ä —Ä—É–≥–Ω—É–ª—Å—è‚Äù.

### –ö–∞–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å

–î–ª—è –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã –ø—É—Ç—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –¥—É—Ö–µ:
`anim(<ref>).layers[<L>].shapes[<S>].it[<I>].ty`

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ –∏ —á–∏—Å—Ç–æ)

–†–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–µ –ø—ã—Ç–∞—Ç—å—Å—è ‚Äú—Å–∫–ª–µ–∏–≤–∞—Ç—å context‚Äù, –∞ —Å–¥–µ–ª–∞—Ç—å —Ä–µ–∫—É—Ä—Å–∏—é –ø–æ **basePath**:

* –í–Ω—É—Ç—Ä–∏ `validateShapeItem` –≤—ã—á–∏—Å–ª—è–µ—à—å `basePath` **–æ–¥–∏–Ω —Ä–∞–∑**.
* –î–ª—è –≥—Ä—É–ø–ø—ã —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤—ã–∑—ã–≤–∞–µ—à—å —Å `childBasePath = "\(basePath).it[\(itemIndex)]"`.

–¢–æ –µ—Å—Ç—å –ª—É—á—à–µ –≤—ã–Ω–µ—Å—Ç–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π helper:

```swift
private func validateShapeItem(shape: ShapeItem, basePath: String, ...) { ... }
```

–ò –≤–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –≤—ã–∑—ã–≤–∞–µ—Ç –µ–≥–æ —Å:
`basePath = "anim(\(animRef)).\(context)[\(layerIndex)].shapes[\(shapeIndex)]"`

–ê –≥—Ä—É–ø–ø–∞ ‚Äî —Å:
`"\(basePath).it[\(itemIndex)]"`

## üß™ –ò –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å/—É—Å–∏–ª–∏—Ç—å —Ç–µ—Å—Ç

–£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å `testValidate_rectInGroupShape_returnsError()`, –Ω–æ –æ–Ω **–Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç path**.
–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å assert, —á—Ç–æ `error.path` —Å–æ–¥–µ—Ä–∂–∏—Ç `.it[0].ty` (–∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å), —á—Ç–æ–±—ã —ç—Ç–æ—Ç –±–∞–≥ –±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–ª—Å—è.