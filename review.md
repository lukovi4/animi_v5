Если вы **гарантируете контрактом**, что `masksProperties` **никогда не будет на media/binding слое**, то:

### ✅ 1) Функционально — можно обойтись без изменения кода

Потому что проблема “crop вместе с контентом” исчезнет сама: не будет второй маски, которая двигается вместе с `userTransform`.

Но…

---

## Почему всё равно **стоит** менять код (я бы сказал: да, надо)

Даже если вы “не будете использовать”, это **слишком хрупко**:

* AE/дизайнер легко оставит маску на media слое случайно (как артефакт).
* Текущий движок не просто “нарисует чуть иначе”, он **сломает UX трансформаций** (пользователь увидит неправильную обрезку).
* И вы будете ловить это в проде на отдельных сценах, как сейчас с `block_01`.

Поэтому правильный релизный подход:

### ✅ 2) В движке добавить “защиту от артефактов контента”

**Скипать `masksProperties` на binding layer всегда** (и в inputClip path, и в standard path).

Это маленькое изменение, которое:

* не ломает корректные сцены (маски на других слоях останутся)
* делает систему устойчивой к ошибкам AE
* фиксирует класс багов навсегда

---

## Что именно менять (точно)

В `AnimIR.emitRegularLayerCommands` в двух местах, где сейчас применяется `layer.masks`:

* **inputClip ветка**: когда вы клипаете media через `beginMask(.intersect, inputClip)`
  → внутри неё **не надо** ещё раз эмитить `layer.masks` для binding layer.

* **standard ветка**: когда inputClip отсутствует
  → для binding layer тоже **не эмитить** `layer.masks` (иначе будет “crop”).

Логика:

```swift
let isBinding = isBindingLayer(layer, context: context)

// ...
if !isBinding {
    emitLayerMasksIfAny(...)
}
```

---

## Дополнительно (рекомендую)

### A) Валидатор/компиляция

Добавьте warning/error при компиляции no-anim:

* “Binding layer has masksProperties — ignored; use mediaInput only”
  Чтобы это ловилось сразу, а не руками в UI.

### B) Тест

Регрессионный тест: binding layer + masksProperties + userTransform ≠ identity
Ожидание: **нет команды** `beginMask(add, ...)` для masksProperties, а видимая область не “ужимается”.

---

## Итог

* Если вы **на 100% уверены**, что пайплайн никогда не даст masksProperties на media — можно “не менять”.
* Но **правильное инженерное решение**: **поменять код и сделать fail-safe**, иначе этот баг вернётся.

Я бы поставил задачу программисту как “Hardening: ignore binding-layer masksProperties” + warning валидации.
